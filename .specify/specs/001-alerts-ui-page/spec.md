# Feature Specification: Alerts UI Page

**Feature Branch**: `001-alerts-ui-page`
**Created**: 2026-01-10
**Status**: Draft
**Input**: User description: "Today the alerting system runs every days and send a slack message. That's useful but we can't see these alerts in the UI yet. I want to see in a new page all the alerts. The alerts can live 7 days. They disappear after that."

## User Scenarios & Testing *(mandatory)*

### User Story 1 - View All Active Alerts (Priority: P1)

As a trader, I want to see all my active alerts in a dedicated page so I can quickly review market conditions and trading signals without checking Slack messages.

**Why this priority**: This is the core value proposition - providing visibility into alerts that currently only exist in Slack. Without this, the feature provides no value.

**Independent Test**: Navigate to the Alerts page and verify all alerts from the last 7 days are displayed with their key information (asset, condition, timestamp).

**Acceptance Scenarios**:

1. **Given** alerts exist in the system, **When** I navigate to the Alerts page, **Then** I see a list of all active alerts sorted by timestamp (newest first)
2. **Given** an alert was created 6 days ago, **When** I view the Alerts page, **Then** that alert is visible in the list
3. **Given** an alert was created 8 days ago, **When** I view the Alerts page, **Then** that alert is not visible (expired after 7 days)
4. **Given** multiple alerts exist, **When** I view the Alerts page, **Then** each alert displays asset name, alert condition, timestamp, and alert type

---

### User Story 2 - Filter and Search Alerts (Priority: P2)

As a trader with many assets, I want to filter alerts by asset or alert type so I can focus on specific trading opportunities.

**Why this priority**: Filtering capabilities significantly improve usability for active traders monitoring multiple assets, making the feature more practical for real-world use.

**Independent Test**: Apply a filter for a specific asset, verify only alerts for that asset are displayed.

**Acceptance Scenarios**:

1. **Given** alerts for multiple assets exist, **When** I filter by a specific asset, **Then** only alerts for that asset are displayed
2. **Given** different types of alerts exist, **When** I filter by alert type, **Then** only alerts of that type are displayed
3. **Given** a filter is applied, **When** I clear the filter, **Then** all alerts are displayed again

---

### Edge Cases

- What happens when no alerts exist in the last 7 days? (Display empty state message: "No active alerts")
- What happens when the alerts data source is unavailable? (Display error message with retry option)
- What happens when an alert expires while the page is open? (Alert no longer appears on next page refresh as it's been automatically deleted from storage)
- What happens when there are hundreds of alerts? (Implement pagination with 50 alerts per page)
- What happens when the user first visits the page and no alerts have been generated yet? (Display informative message explaining the feature and when alerts will appear)
- What happens at exactly the 7-day boundary (168 hours)? (Alert is automatically deleted from storage by TTL mechanism)
- What happens with alerts generated across different time zones? (Display timestamps in user's local time with timezone indicator)

## Requirements *(mandatory)*

### Functional Requirements

**Data Retrieval:**
- **FR-001**: System MUST retrieve all available alerts from storage (alerts older than 7 days are automatically removed by TTL)
- **FR-002**: System MUST calculate alert age based on creation timestamp and current time for display purposes
- **FR-003**: System MUST sort alerts by creation timestamp in descending order (newest first)

**Display Requirements:**
- **FR-004**: System MUST display for each alert: asset identifier, alert condition/message, creation timestamp, and alert type
- **FR-005**: System MUST format timestamps in a human-readable format (e.g., "2 hours ago", "3 days ago")
- **FR-006**: System MUST provide absolute timestamp on hover or in detail view
- **FR-007**: System MUST handle empty state when no alerts exist
- **FR-008**: System MUST paginate results when more than 50 alerts exist

**Navigation:**
- **FR-009**: System MUST provide a navigation link to the Alerts page from the main navigation menu
- **FR-010**: System MUST support deep linking to the Alerts page via URL

**Filtering (Priority P2):**
- **FR-011**: System MUST allow filtering alerts by asset identifier
- **FR-012**: System MUST allow filtering alerts by alert type
- **FR-013**: System MUST show alert count for each filter option
- **FR-014**: System MUST support clearing all active filters

### Key Entities

- **Alert**: Represents a single alert notification generated by the alerting system
  - Identifier: Unique alert ID
  - Asset: The trading asset this alert relates to (symbol, code)
  - Condition: The condition that triggered the alert (e.g., "MA50 crossover", "price threshold exceeded")
  - Message: Human-readable alert message
  - Type: Category of alert (e.g., "technical_indicator", "price_alert", "volume_alert")
  - Timestamp: When the alert was created (ISO 8601 format)
  - TTL: Expiration timestamp (creation timestamp + 7 days) for automatic deletion from storage

- **AlertFilter**: Represents user's filter preferences
  - Asset filter: Selected asset or "all"
  - Type filter: Selected alert type or "all"

## Success Criteria *(mandatory)*

### Measurable Outcomes

- **SC-001**: Users can access the Alerts page from the main navigation within 1 click
- **SC-002**: Alerts page loads and displays all active alerts within 2 seconds
- **SC-003**: Each alert displays all required information (asset, condition, timestamp, type) in a scannable format
- **SC-004**: Alerts automatically expire and disappear from the UI exactly 7 days (168 hours) after creation
- **SC-005**: Page correctly handles zero alerts, one alert, and hundreds of alerts without breaking
- **SC-006**: 100% of alerts shown in UI match alerts sent to Slack (no missing or extra alerts)
- **SC-007**: Alert timestamps are accurate within 1 minute of actual creation time
- **SC-008**: Page is accessible on both desktop and mobile devices with responsive design
- **SC-009**: Filtering reduces displayed alerts to only matching items with zero false positives

### Assumptions

- Alerts are already being generated by the existing alerting system
- Alerts are stored in a persistent data store with automatic expiration (not just sent to Slack)
- Alert data structure includes: asset identifier, message/condition, timestamp, type, and TTL attribute
- The alerting system runs on a daily schedule and generates alerts continuously
- Users are authenticated and authorized to view alerts (existing auth system applies)
- Slack remains the primary notification channel (UI is supplementary)
- Alert retention is exactly 7 days with automatic deletion from storage (no user configuration needed)
- Default time zone for display is user's browser time zone
- Pagination limit of 50 alerts per page is sufficient for typical usage
- Manual page refresh is acceptable for seeing new alerts (no auto-refresh requirement)

## Technical Constraints

- **TC-001**: Must integrate with existing alert data source
- **TC-002**: Must respect existing authentication and authorization mechanisms
- **TC-003**: Must follow the project's frontend design system and styling
- **TC-004**: Must be accessible via standard browser navigation
- **TC-005**: Must handle concurrent access from multiple users
- **TC-006**: Alerts must automatically expire from storage after 7 days using TTL mechanism (no manual deletion required)

## Non-Functional Requirements

- **NFR-001**: Page load time must be under 2 seconds for up to 500 alerts
- **NFR-002**: Alerts must be displayed in a scannable, easy-to-read format
- **NFR-003**: UI must be responsive and work on mobile, tablet, and desktop screens
- **NFR-004**: Timestamp display must be intuitive and require minimal cognitive effort to understand
- **NFR-005**: Empty states and error states must provide clear guidance to users
- **NFR-006**: Page refresh must preserve user's current filters when possible
- **NFR-007**: Page must maintain visual consistency with existing application design
